<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">
<head th:fragment="head">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title th:text="${title}">BIOUI Analyser</title>
	<link th:href="@{/css/mainly/bootstrap.min.css}" rel="stylesheet">
	<link th:href="@{/css/mainly/bootstrap-datetimepicker.min.css}" rel="stylesheet">
    <link th:href="@{/css/mainly/font-awesome.css}" rel="stylesheet">
    <link th:href="@{/css/mainly/animate.css}" rel="stylesheet">
	<link th:href="@{/css/chart-doughnut.css}" rel="stylesheet">
	<link th:href="@{/css/mainly/style.css}" rel="stylesheet">
	<link th:href="@{/css/main.css}" rel="stylesheet">

	<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>

	<link rel="stylesheet" th:href="@{/css/main.css}"/>
	<script type="text/javascript">
		$(window).load(function() {
        $(".loader").fadeOut("slow");
    });
	</script>

</head>

<body class="gray-bg">
	<div th:fragment="header">

		<nav class="navbar navbar-static-top nav-bg" role="navigation" style="margin-bottom: 0;" sec:authorize="isAuthenticated()">
			<div class="navbar-header ">

				<img class="card-img-top img-fluid" src="/img/logo.png"
					 th:alt="OPERO"/>

			</div>
			<ul class="nav navbar-top-links navbar-right">
				<li>
					<span class="m-r-sm text-muted welcome-message">
						 <span sec:authentication="name"> you are a <span class="col" sec:authentication="authorities">
					</span>
				</li>
				<li>
					<a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
						<i class="fa fa-bell"></i>  <span class="label label-primary">1</span>
					</a>
				</li>
				<li>
					<form th:action="@{/logout}" method="post">
						<button type="submit" class="btn btn-link ">
							<i class="fa fa-sign-out"></i> Se déconnécter
						</button>
					</form>
				</li>
			</ul>
		</nav>
	</div>

	<div th:fragment="choisirChantier">

		<div class="col-sm-6">
			<br>

			<div th:switch="${choisir}">
				<div class="btn-group pull-right " th:case="1">
					<a class="btn btn-secondary ouiButton" href="/user/">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" href="/user/twoWeeks">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" href="/user/month">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="2">
					<a class="btn btn-secondary nonButton" href="/user/">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary ouiButton" href="/user/twoWeeks">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" href="/user/month">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="3">
					<a class="btn btn-secondary nonButton" href="/user/">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" href="/user/twoWeeks">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary ouiButton" href="/user/month">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="4">
					<a class="btn btn-secondary nonButton" href="/user/">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" href="/user/twoWeeks">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" href="/user/month">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary ouiButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>

			</div>


		</div>
	</div>

	<div th:fragment="choisirChantierStatistic">

		<div class="col-sm-6">
			<br>

			<div th:switch="${choisir}">
				<div class="btn-group pull-right " th:case="1">
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic'}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="2">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic'}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="3">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic'}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="4">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic'}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/statistic/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary ouiButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>

			</div>


		</div>
	</div>

	<div th:fragment="choisirEngin">

		<div class="col-sm-6">
			<br>

			<div th:switch="${choisir}">
				<div class="btn-group pull-right " th:case="1">
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>
					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="2">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>
					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="3">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${chantier.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>
					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="4">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${chantier.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>
					<a class="btn btn-secondary ouiButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>

			</div>


		</div>
	</div>

	<div th:fragment="choisirEnginStatistic">

		<div class="col-sm-6">
			<br>

			<div th:switch="${choisir}">
				<div class="btn-group pull-right " th:case="1">
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="2">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>
				</div>
				<div class="btn-group pull-right " th:case="3">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary ouiButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary nonButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>
				<div class="btn-group pull-right " th:case="4">
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}}">
						<i class="fa fa-bar-chart"></i> Semaine
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/twoWeeks'}">
						<i class="fa fa-bar-chart"></i> 15 Jours
					</a>
					<a class="btn btn-secondary nonButton" th:href="@{'/user/chantier/'+${engin.chantier.id}+'/engin/'+${engin.id}+'/month'}">
						<i class="fa fa-bar-chart"></i> Mois
					</a>

					<a class="btn btn-secondary ouiButton" href="#"  onclick="showDiv()">
						<i class="fa fa-bar-chart"></i> Choisir
					</a>

				</div>

			</div>


		</div>
	</div>


	<div class="stats-forms" th:fragment="statsForm"  id="fragment" >
		<form method="post" th:object="${statistic}" >
			<input type="hidden"
				   th:name="${_csrf.parameterName}"
				   th:value="${_csrf.token}"/>

			<div class="row">
			    <!-- Date From -->
				<div class='col-md-6'>
			        <div th:class="${#fields.hasErrors('dayFrom')} ? 'form-group row has-danger' : 'form-group row'">
			            <label class="col-sm-2 col-form-label stats-label" for="dayFrom">De:</label>
						<div class="col-sm-10">
				            <div class='input-group date' id='datepicker1'>
				               <input id="dayFrom" type="text" class="form-control" th:field="*{dayFrom}"
								   placeholder="dd/mm/aaaa" th:errorclass="form-control-danger"/>
								<div class="form-control-feedback" th:if="${#fields.hasErrors('dayFrom')}">
									<ul>
										<li th:each="err : ${#fields.errors('dayFrom')}" th:text="${err}"/>
									</ul>
								</div>
				                <span class="input-group-addon">
				                    <span class="fa fa-calendar"></span>
				                </span>
				            </div>
				        </div>
			        </div>
			    </div>
			    <div class='col-md-6'>
			        <div th:class="${#fields.hasErrors('dayTo')} ? 'form-group row has-danger' : 'form-group row'">
			            <label class="col-sm-2 col-form-label stats-label" for="dayTo">Jusqu'à:</label>
						<div class="col-sm-10">
				            <div class='input-group date' id='datepicker2'>
				                <input id="dayTo" type="text" class="form-control" th:field="*{dayTo}"
							   placeholder="dd/mm/aaaa" th:errorclass="form-control-danger"/>
								<div class="form-control-feedback" th:if="${#fields.hasErrors('dayTo')}">
									<ul>
										<li th:each="err : ${#fields.errors('dayTo')}" th:text="${err}"/>
									</ul>
								</div>
				                <span class="input-group-addon">
				                    <span class="fa fa-calendar"></span>
				                </span>
				            </div>
				        </div>
			        </div>
			    </div>
			    
			    <div class='col-md-6'>
			        <div th:class="${#fields.hasErrors('hourFrom')} ? 'form-group row has-danger' : 'form-group row'">
			            <label class="col-sm-2 col-form-label stats-label" for="hourFrom"> De:</label>
						<div class="col-sm-10">
				            <div class='input-group date' id='timepicker1'>
				                
								<input id="hourFrom" type="text" class="form-control" th:field="*{hourFrom}"
									   placeholder="hh:mm" th:errorclass="form-control-danger"/>
								<div class="form-control-feedback" th:if="${#fields.hasErrors('hourFrom')}">
									<ul>
										<li th:each="err : ${#fields.errors('hourFrom')}" th:text="${err}"/>
									</ul>
								</div>
				                <span class="input-group-addon">
				                    <span class="fa fa-calendar"></span>
				                </span>
				            </div>
				        </div>
			        </div>
			    </div>
			    <div class='col-md-6'>
			        <div th:class="${#fields.hasErrors('hourTo')} ? 'form-group row has-danger' : 'form-group row'">
			            <label class="col-sm-2 col-form-label stats-label" for="hourTo"> Jusqu'à:</label>
						<div class="col-sm-10">
				            <div class='input-group date' id='timepicker2'>
				                <input id="hourTo" type="text" class="form-control" th:field="*{hourTo}"
								   placeholder="hh:mm" th:errorclass="form-control-danger"/>
								<div class="form-control-feedback" th:if="${#fields.hasErrors('hourTo')}">
									<ul>
										<li th:each="err : ${#fields.errors('hourTo')}" th:text="${err}"/>
									</ul>
								</div>
				                <span class="input-group-addon">
				                    <span class="fa fa-calendar"></span>
				                </span>
				            </div>
				        </div>
			        </div>
			    </div>
				<br>
				<div class="col-sm-6" >
					<div th:class="${#fields.hasErrors('nbHourRepos')} ? 'form-group row has-danger' : 'form-group row'">
						<label class="col-sm-2 col-form-label mr-auto stats-label" for="nbHourRepos">Repos:</label>
						<div class="col-sm-10">
							<input id="nbHourRepos" type="number" class="form-control" th:field="*{nbHourRepos}"
								   th:errorclass="form-control-danger"/>
							<div class="form-control-feedback" th:if="${#fields.hasErrors('nbHourRepos')}">
								<ul>
									<li th:each="err : ${#fields.errors('nbHourRepos')}" th:text="${err}"/>
								</ul>
							</div>
						</div>
					</div>

				</div>
				<div class="col-md-6 ">
					<button type="submit" class="btn  btn-success inspercterButt ">Inspecter</button>
				</div>
			</div>
		</form>
	</div>
	<div th:fragment="footer">
		<!-- Mainly scripts -->
		<script th:src="@{/js/mainly/jquery-3.1.1.min.js}"></script>
		<script th:src="@{/js/mainly/bootstrap.min.js}"></script>
		<script th:src="@{/js/mainly/jquery.metisMenu.js}"></script>
		<script th:src="@{/js/mainly/jquery.slimscroll.min.js}"></script>
		<script th:src="@{/js/mainly//date-picker/moment.min.js}"></script>
		<script th:src="@{/js/mainly//date-picker/bootstrap-datetimepicker.min.js}"></script>
		<script th:src="@{/js/main.js}"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>

	</div>
	
	<div th:fragment="chart-plugin">
		<script th:src="@{/js/mainly/chart-plugins/chart-doughnut.js}"></script>
		<script th:src="@{/js/mainly/chart-plugins/chart-bar.js}"></script>>
	</div>

	<div th:fragment="menu">
		<!--
		Add this fragment to a template and add
		model.addAttribute("chantiers",adminChantierService.getChantierList());
		to the controller which return that specific template (at the beginning of he every controller's method which return that templates {GET, POST ..} )

		P.S : This fragment need some styling
		-->

		<ul>
			<li>
				<a href="/user/">Chantiers</a>
				<ul th:each="chantier : ${chantiers}">
					<a th:href="@{'/user/chantier/'+${chantier.id}}" th:text="${chantier.nom}"></a>
					<li th:each="engin : ${chantier.engins}">
						<a th:href="@{'/user/chantier/'+${chantier.id}+'/engin/'+${engin.id}}"
						   th:text="'Engin N° '+${engin.id}"></a>
					</li>
				</ul>
			</li>
			<li><a href="#">Engins</a></li>
			<li><a href="#">Chauffeurs</a></li>
		</ul>
	</div>

	<div th:fragment="loader">
		<div class="loader"></div>
	</div>
</body>
</html>